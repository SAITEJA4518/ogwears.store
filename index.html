<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OG WEARS Store</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
    body{background:#fff;color:#222;overflow-x:hidden;}
    header{background:#000;color:#fff;display:flex;justify-content:space-between;align-items:center;padding:15px 30px;position:fixed;top:0;left:0;right:0;z-index:1000;}
    .logo-area{text-align:right;}
    .logo-area img{height:50px;display:block;margin-left:auto;animation:fadeIn 1s ease;}
    .logo-area h1{font-size:22px;margin:5px 0 0;}
    .logo-area p{font-size:12px;color:#ccc;}
    .icons{display:flex;gap:20px;}
    .icons i{color:#e50914;cursor:pointer;font-size:22px;transition:transform .2s;}
    .icons i:hover{transform:scale(1.2);}
    main{padding:120px 30px 40px;}
    h2{margin-bottom:20px;}
    .section-title{
      font-size:24px;font-weight:700;color:#e50914;text-align:center;margin:40px 0 20px;position:relative;letter-spacing:.5px;
    }
    .section-title::after{
      content:"";width:70px;height:3px;background:#e50914;position:absolute;bottom:-10px;left:50%;transform:translateX(-50%);border-radius:2px;
    }
    .products-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:20px;}
    .product{background:#f7f7f7;border-radius:8px;padding:15px;text-align:center;transition:transform .3s,box-shadow .3s;animation:fadeUp 0.6s ease;}
    .product:hover{transform:translateY(-5px);box-shadow:0 4px 12px rgba(0,0,0,.15);}
    .product img{max-width:100%;height:200px;object-fit:cover;border-radius:6px;transition:transform .3s;}
    .product img:hover{transform:scale(1.05);}
    .product h3{margin:10px 0;font-size:16px;}
    .product p{margin:5px 0;}
    .product .price{color:#e50914;font-weight:600;}
    .product .actual{text-decoration:line-through;color:#777;font-size:14px;}
    .product button{background:#e50914;color:#fff;border:none;padding:8px 12px;border-radius:4px;cursor:pointer;margin:5px;transition:.3s;}
    .product button:hover{box-shadow:0 0 8px #e50914;}
    footer{background:#000;color:#fff;text-align:center;padding:20px;margin-top:40px;animation:fadeIn 1.2s ease;}
    footer a{color:#e50914;margin:0 10px;text-decoration:none;}
    /* Drawers */
    .drawer{position:fixed;top:0;right:-400px;width:350px;height:100%;background:#fff;box-shadow:-2px 0 10px rgba(0,0,0,.2);transition:.4s;padding:20px;z-index:1200;overflow-y:auto;}
    .drawer.active{right:0;}
    .drawer h3{margin-bottom:15px;}
    .drawer .close{float:right;font-size:20px;cursor:pointer;color:#e50914;}
    /* Modal */
    .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);align-items:center;justify-content:center;z-index:1500;}
    .modal.active{display:flex;}
    .modal-content{background:#000;color:#fff;padding:20px;border-radius:8px;max-width:500px;width:90%;position:relative;animation:scaleUp 0.4s ease;text-align:center;}
    .modal-content h3{margin-bottom:10px;color:#e50914;}
    .modal-content p{margin:6px 0;}
    .modal-content .close{position:absolute;top:10px;right:10px;font-size:20px;color:#e50914;cursor:pointer;}
    .modal-content button{background:#e50914;color:#fff;margin:6px;padding:8px 14px;border:none;border-radius:4px;cursor:pointer;}
    .modal-content {
  background:#000;
  color:#fff;
  padding:20px;
  border-radius:8px;
  max-width:500px;
  width:90%;
  position:relative;
  animation:scaleUp 0.4s ease;
  text-align:center;

  /* Fix for scrolling */
  max-height:90vh;       /* prevent content from going off-screen */
  overflow-y:auto;       /* enable vertical scroll */
}

    /* Forms */
    .form-group{margin-bottom:12px;text-align:left;}
    .form-group label{display:block;margin-bottom:5px;font-weight:500;}
    .form-group input,.form-group textarea,.form-group select{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;}
    button.primary{background:#e50914;color:#fff;padding:10px 14px;border:none;border-radius:4px;cursor:pointer;}
    button.primary:hover{box-shadow:0 0 10px #e50914;}
    .order-card{border:1px solid #ddd;border-radius:6px;padding:12px;margin-bottom:10px;background:#fafafa;}
    .receipt{border:2px dashed #e50914;padding:15px;border-radius:8px;margin:10px 0;background:#fff;}
    .receipt h4{margin-bottom:10px;color:#e50914;}
    .receipt p{margin:4px 0;font-size:14px;}
    .receipt button{margin-top:8px;}
    .status{font-weight:600;color:#e50914;margin-top:6px;}
    .muted{color:#777;font-size:12px;}
    /* Animations */
    @keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
    @keyframes fadeUp{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
    @keyframes scaleUp{from{transform:scale(0.8);opacity:0;}to{transform:scale(1);opacity:1;}}
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="icons">
      <i class="fa fa-heart" onclick="toggleDrawer('wishlistDrawer')"></i>
      <i class="fa fa-shopping-cart" onclick="toggleDrawer('cartDrawer')"></i>
      <i class="fa fa-user" onclick="toggleDrawer('accountDrawer')"></i>
    </div>
    <div class="logo-area">
      <img id="siteLogo" src="" alt="OG WEARS Logo">
      <h1>OG WEARS</h1>
      <p>Wear Confidence. Wear OG.</p>
    </div>
  </header>

  <!-- Main -->
  <main>
    <h2 class="section-title">OG COLLECTION ðŸ”¥</h2>
    <div class="products-grid" id="productsGrid"></div>
  </main>

  <!-- Footer -->
  <footer>
    <p>Follow us:
      <a href="https://www.instagram.com/ogwears.store/" target="_blank"><i class="fab fa-instagram"></i></a>
      <a href="https://www.youtube.com/@OGWEARS-45" target="_blank"><i class="fab fa-youtube"></i></a>
    </p>
    <p>Â© 2025 OG WEARS. All Rights Reserved.</p>
  </footer>

  <!-- Drawers -->
  <div class="drawer" id="wishlistDrawer">
    <span class="close" onclick="toggleDrawer('wishlistDrawer')">&times;</span>
    <h3>Wishlist</h3>
    <div id="wishlistItems"></div>
  </div>

  <div class="drawer" id="cartDrawer">
    <span class="close" onclick="toggleDrawer('cartDrawer')">&times;</span>
    <h3>Cart</h3>
    <div id="cartItems"></div>
    <p id="cartTotal"></p>
    <button class="primary" onclick="openCheckout()">Proceed to Checkout</button>
  </div>

  <div class="drawer" id="accountDrawer">
    <span class="close" onclick="toggleDrawer('accountDrawer')">&times;</span>
    <h3>Account</h3>
    <div id="accountContent"></div>
  </div>

  <!-- Quick View Modal -->
  <div class="modal" id="quickViewModal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('quickViewModal')">&times;</span>
      <img id="qvImage" src="" style="width:100%;border-radius:6px;margin-bottom:10px;">
      <h3 id="qvTitle"></h3>
      <p>
        <span id="qvPrice" class="price"></span>
        <span id="qvActual" class="actual"></span>
        <span id="qvDiscount"></span>
      </p>
      <p id="qvDesc"></p>
      <button onclick="addToCart(qvProduct)"><i class="fa fa-shopping-cart"></i> Add to Cart</button>
      <button onclick="addToWishlist(qvProduct)"><i class="fa fa-heart"></i> Add to Wishlist</button>
    </div>
  </div>

  <!-- Checkout Modal -->
  <div class="modal" id="checkoutModal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('checkoutModal')">&times;</span>
      <h3>Checkout</h3>
      <div class="form-group"><label>Name</label><input id="chkName"></div>
      <div class="form-group"><label>Email</label><input id="chkEmail"></div>
      <div class="form-group"><label>Phone</label><input id="chkPhone"></div>

      <div class="form-group"><label>Address Line 1 (Flat No.)</label><input id="chkAddr1" placeholder="Flat / House No."></div>
      <div class="form-group"><label>Address Line 2 (Street Name)</label><input id="chkAddr2" placeholder="Street / Locality"></div>
      <div class="form-group"><label>Village/Town</label><input id="chkTown"></div>
      <div class="form-group"><label>City</label><input id="chkCity"></div>
      <div class="form-group"><label>State</label><input id="chkState"></div>
      <div class="form-group"><label>Country</label><input id="chkCountry" value="India"></div>

      <div class="form-group"><label>Coupon Code</label><input id="chkCoupon" placeholder="Optional"></div>
      <div class="form-group"><label>Payment</label>
        <select id="chkPayment">
          <option value="COD">Cash on Delivery</option>
        </select>
        <p class="muted">Only Cash on Delivery is available for safe and better payments.</p>
      </div>
      <button class="primary" onclick="placeOrder()">Place Order</button>
    </div>
  </div>

  <script>
    let qvProduct=null;

    const STATUS = {
      PLACED: 'Placed',
      PACKED: 'Packed',
      SHIPPED: 'Shipped',
      DELIVERED: 'Delivered',
      CANCELLED: 'Cancelled'
    };

    function toggleDrawer(id){document.getElementById(id).classList.toggle("active");}
    function closeModal(id){document.getElementById(id).classList.remove("active");}
    function openCheckout(){
      const user=JSON.parse(localStorage.getItem("currentUser")||"null");
      if(!user){alert("Login first!");toggleDrawer('accountDrawer');return;}
      document.getElementById("checkoutModal").classList.add("active");
    }

    function loadLogo(){
      const logo=localStorage.getItem("siteLogo");
      if(logo) document.getElementById("siteLogo").src=logo;
    }

    function loadProducts(){
      const products=JSON.parse(localStorage.getItem("products")||"[]");
      const grid=document.getElementById("productsGrid");grid.innerHTML="";
      products.forEach(p=>{
        const discount=Math.round(((p.actual-p.price)/p.actual)*100);
        grid.innerHTML+=`
          <div class="product">
            <img src="${p.image}" alt="${p.title}">
            <h3>${p.title}</h3>
            <p><span class="price">â‚¹${p.price}</span> <span class="actual">â‚¹${p.actual}</span> <span style="color:green">(${discount}% off)</span></p>
            <button onclick='addToWishlist(${JSON.stringify(p)})' title="Add to Wishlist"><i class="fa fa-heart"></i></button>
            <button onclick='addToCart(${JSON.stringify(p)})' title="Add to Cart"><i class="fa fa-shopping-cart"></i></button>
            <button onclick='quickView(${JSON.stringify(p)})' title="Quick View">Quick View</button>
          </div>`;
      });
    }

    function addToWishlist(prod){
      let list=JSON.parse(localStorage.getItem("wishlist")||"[]");
      list.push(prod);
      localStorage.setItem("wishlist",JSON.stringify(list));
      renderWishlist();
    }

    function renderWishlist(){
      const list=JSON.parse(localStorage.getItem("wishlist")||"[]");
      const div=document.getElementById("wishlistItems");
      div.innerHTML="";
      list.forEach((p,i)=>{
        div.innerHTML+=`<div class="order-card">
          <img src="${p.image}" width="50" style="vertical-align:middle;border-radius:4px;margin-right:8px"> ${p.title} - â‚¹${p.price}
          <button style="float:right" onclick="moveToCart(${i})">Add to Cart</button>
        </div>`;
      });
    }

    function moveToCart(i){
      let list=JSON.parse(localStorage.getItem("wishlist")||"[]");
      let cart=JSON.parse(localStorage.getItem("cart")||"[]");
      cart.push(list[i]);list.splice(i,1);
      localStorage.setItem("wishlist",JSON.stringify(list));
      localStorage.setItem("cart",JSON.stringify(cart));
      renderWishlist();renderCart();
    }

    function addToCart(prod){
      let cart=JSON.parse(localStorage.getItem("cart")||"[]");
      cart.push(prod);
      localStorage.setItem("cart",JSON.stringify(cart));
      renderCart();
    }

    function renderCart(){
      const cart=JSON.parse(localStorage.getItem("cart")||"[]");
      const div=document.getElementById("cartItems");div.innerHTML="";
      let total=0;
      cart.forEach((p)=>{
        total+=Number(p.price)||0;
        div.innerHTML+=`<div class="order-card">
          <img src="${p.image}" width="50" style="vertical-align:middle;border-radius:4px;margin-right:8px"> ${p.title} - â‚¹${p.price}
        </div>`;
      });
      document.getElementById("cartTotal").innerText="Subtotal: â‚¹"+total;
    }

    function renderAccount(){
      const user=JSON.parse(localStorage.getItem("currentUser")||"null");
      const div=document.getElementById("accountContent");
      if(!user){
        div.innerHTML=`<h4 style="color:#e50914">Login</h4>
          <div class="form-group"><label>Email</label><input id="loginEmail"></div>
          <div class="form-group"><label>Password</label><input type="password" id="loginPass"></div>
          <button class="primary" onclick="login()"><i class="fa fa-sign-in-alt"></i> Login</button>
          <p>Don't have an account? <a href="#" onclick="showRegister()" style="color:#e50914">Register here</a></p>`;
      } else {
        div.innerHTML=`<p>Welcome, ${user.name}</p>
          <button onclick="logout()" class="primary" style="margin-bottom:12px"><i class="fa fa-sign-out-alt"></i> Logout</button>
          <h4>My Orders</h4>
          <div id="myOrders"></div>`;
        renderMyOrders();
      }
    }

    function showRegister(){
      const div=document.getElementById("accountContent");
      div.innerHTML=`<h4 style="color:#e50914">Register</h4>
        <div class="form-group"><label>Name</label><input id="regName"></div>
        <div class="form-group"><label>Email</label><input id="regEmail"></div>
        <div class="form-group"><label>Phone</label><input id="regPhone"></div>
        <div class="form-group"><label>Password</label><input type="password" id="regPass"></div>
        <button class="primary" onclick="register()"><i class="fa fa-user-plus"></i> Register</button>
        <p>Already have an account? <a href="#" onclick="renderAccount()" style="color:#e50914">Login here</a></p>`;
    }

    function register(){
      const users=JSON.parse(localStorage.getItem("users")||"[]");
      const u={id:"U"+Date.now(),name:regName.value,email:regEmail.value,phone:regPhone.value,pass:regPass.value};
      users.push(u);localStorage.setItem("users",JSON.stringify(users));
      alert("Registered! Now login.");renderAccount();
    }

    function login(){
      const users=JSON.parse(localStorage.getItem("users")||"[]");
      const u=users.find(x=>x.email==loginEmail.value && x.pass==loginPass.value);
      if(u){localStorage.setItem("currentUser",JSON.stringify(u));renderAccount();}else alert("Invalid!");
    }

    function logout(){localStorage.removeItem("currentUser");renderAccount();}

    function quickView(prod){
      qvProduct=prod;
      const discount=Math.round(((prod.actual-prod.price)/prod.actual)*100);
      document.getElementById("qvImage").src=prod.image;
      document.getElementById("qvTitle").innerText=prod.title;
      document.getElementById("qvPrice").innerText="â‚¹"+prod.price;
      document.getElementById("qvActual").innerText="â‚¹"+prod.actual;
      document.getElementById("qvDiscount").innerText=" ("+discount+"% off)";
      document.getElementById("qvDesc").innerText=prod.desc||'';
      document.getElementById("quickViewModal").classList.add("active");
    }

    function placeOrder(){
      const user=JSON.parse(localStorage.getItem("currentUser")||"null");
      if(!user){alert("Login first!");return;}
      let cart=JSON.parse(localStorage.getItem("cart")||"[]");
      if(cart.length==0){alert("Cart empty!");return;}

      const name=chkName.value,email=chkEmail.value,phone=chkPhone.value,
            addr1=chkAddr1.value,addr2=chkAddr2.value,town=chkTown.value,
            city=chkCity.value,state=chkState.value,country=chkCountry.value;

      const address=`${addr1}, ${addr2}, ${town}, ${city}, ${state}, ${country}`.replace(/\s*,\s*,/g,',').replace(/,\s*$/,'');

      const coupon=chkCoupon.value;let discount=0;
      const coupons=JSON.parse(localStorage.getItem("coupons")||"[]");
      const c=coupons.find(x=>x.code==coupon);
      if(c) discount=c.discount;

      let total=cart.reduce((a,b)=>a+(Number(b.price)||0),0);
      total=total-(total*discount/100);

      const order={
        id:"O"+Date.now(),
        user:user,
        date:new Date().toLocaleString(),
        items:cart,
        address,
        total:Math.round(total),
        discount,
        payment:"COD",
        status:STATUS.PLACED
      };

      const orders=JSON.parse(localStorage.getItem("orders")||"[]");
      orders.push(order);
      localStorage.setItem("orders",JSON.stringify(orders));
      localStorage.setItem("cart","[]");

      alert("Order placed!");
      closeModal('checkoutModal');
      renderCart();
      renderMyOrders();
    }

    function renderMyOrders(){
      const user=JSON.parse(localStorage.getItem("currentUser")||"null");
      if(!user) return;
      // Pull all orders and filter by current user
      const ordersAll=JSON.parse(localStorage.getItem("orders")||"[]");
      const orders=ordersAll.filter(o=>o.user && o.user.id===user.id);
      const div=document.getElementById("myOrders");
      div.innerHTML="";
      if(orders.length===0){div.innerHTML="<p>No orders yet.</p>";return;}

      orders.sort((a,b)=> (a.date>b.date?-1:1)); // newest first

      orders.forEach(o=>{
        const canCancel = (o.status===STATUS.PLACED || o.status===STATUS.PACKED);
        div.innerHTML+=`
          <div class="receipt">
            <h4>Order #${o.id}</h4>
            <p class="status"><b>Status:</b> ${o.status||STATUS.PLACED}</p>
            <p><b>Date:</b> ${o.date}</p>
            <p><b>Address:</b> ${o.address}</p>
            <div><b>Items:</b> ${o.items.map(i=>`${i.title} (â‚¹${i.price})`).join(", ")}</div>
            <p><b>Total:</b> â‚¹${o.total} <span class="muted">(Discount: ${o.discount||0}%)</span></p>
            <div style="margin-top:8px;">
              ${canCancel ? `<button onclick="cancelOrder('${o.id}')" class="primary" style="background:#444">Cancel Order</button>` : `<span class="muted">Cancellation unavailable after Shipped.</span>`}
              <button onclick="printReceipt('${o.id}')" class="primary"><i class="fa fa-print"></i> Print Receipt</button>
            </div>
          </div>`;
      });
    }

    function cancelOrder(id){
      const orders=JSON.parse(localStorage.getItem("orders")||"[]");
      const idx=orders.findIndex(x=>x.id==id);
      if(idx===-1) return;

      const st=orders[idx].status||STATUS.PLACED;
      if(st===STATUS.PLACED || st===STATUS.PACKED){
        if(confirm("Are you sure you want to cancel this order?")){
          orders[idx].status=STATUS.CANCELLED;
          localStorage.setItem("orders",JSON.stringify(orders));
          renderMyOrders();
          alert("Order cancelled.");
        }
      }else{
        alert("Order can no longer be cancelled.");
      }
    }

    function printReceipt(id){
      const orders=JSON.parse(localStorage.getItem("orders")||"[]");
      const o=orders.find(x=>x.id==id);
      if(!o) return;
      const receiptHTML=`
        <html>
          <head>
            <title>Receipt - ${o.id}</title>
            <style>
              body{font-family:Poppins,sans-serif;background:#fff;color:#000;padding:20px;}
              h2{color:#e50914;text-align:center;}
              .logo{text-align:center;margin-bottom:20px;}
              .logo h1{margin:0;font-size:28px;}
              .logo p{margin:0;font-size:14px;color:#555;}
              .section{margin-bottom:15px;}
              .section h3{border-bottom:1px solid #ccc;padding-bottom:5px;color:#e50914;}
              .items p{margin:4px 0;}
              .thank{text-align:center;margin-top:20px;font-weight:bold;}
              .muted{color:#777;}
            </style>
          </head>
          <body>
            <div class="logo">
              <h1>OG WEARS</h1>
              <p>Wear Confidence. Wear OG.</p>
            </div>
            <h2>Order Receipt</h2>
            <div class="section">
              <h3>Order Info</h3>
              <p><b>Order ID:</b> ${o.id}</p>
              <p><b>Date:</b> ${o.date}</p>
              <p><b>Status:</b> ${o.status||'Placed'}</p>
              <p><b>Payment:</b> ${o.payment||'COD'}</p>
            </div>
            <div class="section">
              <h3>User Details</h3>
              <p><b>Name:</b> ${o.user.name}</p>
              <p><b>Email:</b> ${o.user.email}</p>
              <p><b>Phone:</b> ${o.user.phone}</p>
              <p><b>Address:</b> ${o.address}</p>
            </div>
            <div class="section items">
              <h3>Products</h3>
              ${o.items.map(i=>`<p>${i.title} - â‚¹${i.price}</p>`).join("")}
            </div>
            <div class="section">
              <h3>Billing</h3>
              <p><b>Discount:</b> ${o.discount||0}%</p>
              <p><b>Total Payable:</b> â‚¹${o.total}</p>
            </div>
            <p class="thank">Thank you for shopping with OG WEARS!</p>
          </body>
        </html>
      `;
      const w=window.open("","PrintWindow");
      w.document.write(receiptHTML);
      w.document.close();
      w.print();
    }

    // INIT
    loadLogo();
    loadProducts();
    renderWishlist();
    renderCart();
    renderAccount();
  </script>
</body>
</html>
